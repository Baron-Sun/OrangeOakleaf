{"ast":null,"code":"import _slicedToArray from\"D:\\\\Repos\\\\Projects\\\\test-ebook-2\\\\OrangeOakleaf\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import Webcam from\"react-webcam\";import{Button}from'antd';export var WebcamStreamCapture=function WebcamStreamCapture(){var webcamRef=React.useRef(null);var mediaRecorderRef=React.useRef(null);var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),capturing=_React$useState2[0],setCapturing=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),recordedChunks=_React$useState4[0],setRecordedChunks=_React$useState4[1];var videoConstraints={width:320,height:240,facingMode:\"user\"};var handleStartCaptureClick=React.useCallback(function(){setCapturing(true);mediaRecorderRef.current=new MediaRecorder(webcamRef.current.stream,{mimeType:\"video/webm\"});mediaRecorderRef.current.addEventListener(\"dataavailable\",handleDataAvailable);mediaRecorderRef.current.start();},[webcamRef,setCapturing,mediaRecorderRef]);var handleDataAvailable=React.useCallback(function(_ref){var data=_ref.data;if(data.size>0){setRecordedChunks(function(prev){return prev.concat(data);});}},[setRecordedChunks]);var handleStopCaptureClick=React.useCallback(function(){mediaRecorderRef.current.stop();setCapturing(false);},[mediaRecorderRef,webcamRef,setCapturing]);var handleDownload=React.useCallback(function(){if(recordedChunks.length){var blob=new Blob(recordedChunks,{type:\"video/webm\"});var url=URL.createObjectURL(blob);console.log(url);var a=document.createElement(\"a\");document.body.appendChild(a);a.style=\"display: none\";a.href=url;a.download=\"react-webcam-stream-capture.webm\";a.click();window.URL.revokeObjectURL(url);setRecordedChunks([]);}},[recordedChunks]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Webcam,{audio:true,ref:webcamRef,videoConstraints:videoConstraints}),capturing?/*#__PURE__*/React.createElement(Button,{onClick:handleStopCaptureClick,type:\"primary\",danger:true},\"Stop Capture\"):/*#__PURE__*/React.createElement(Button,{onClick:handleStartCaptureClick,type:\"primary\"},\"Start Capture\"),recordedChunks.length>0&&/*#__PURE__*/React.createElement(Button,{onClick:handleDownload,type:\"primary\"},\"Download\"));};","map":{"version":3,"sources":["D:/Repos/Projects/test-ebook-2/OrangeOakleaf/src/components/WebcamStreamCapture.js"],"names":["React","Webcam","Button","WebcamStreamCapture","webcamRef","useRef","mediaRecorderRef","useState","capturing","setCapturing","recordedChunks","setRecordedChunks","videoConstraints","width","height","facingMode","handleStartCaptureClick","useCallback","current","MediaRecorder","stream","mimeType","addEventListener","handleDataAvailable","start","data","size","prev","concat","handleStopCaptureClick","stop","handleDownload","length","blob","Blob","type","url","URL","createObjectURL","console","log","a","document","createElement","body","appendChild","style","href","download","click","window","revokeObjectURL"],"mappings":"4KAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,OAASC,MAAT,KAAuB,MAAvB,CAGA,MAAO,IAAMC,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,EAAM,CACvC,GAAMC,CAAAA,SAAS,CAAGJ,KAAK,CAACK,MAAN,CAAa,IAAb,CAAlB,CACA,GAAMC,CAAAA,gBAAgB,CAAGN,KAAK,CAACK,MAAN,CAAa,IAAb,CAAzB,CAFuC,oBAGLL,KAAK,CAACO,QAAN,CAAe,KAAf,CAHK,oDAGhCC,SAHgC,qBAGrBC,YAHqB,0CAIKT,KAAK,CAACO,QAAN,CAAe,EAAf,CAJL,qDAIhCG,cAJgC,qBAIhBC,iBAJgB,qBAMvC,GAAMC,CAAAA,gBAAgB,CAAG,CACvBC,KAAK,CAAE,GADgB,CAEvBC,MAAM,CAAE,GAFe,CAGvBC,UAAU,CAAE,MAHW,CAAzB,CAMA,GAAMC,CAAAA,uBAAuB,CAAGhB,KAAK,CAACiB,WAAN,CAAkB,UAAM,CACtDR,YAAY,CAAC,IAAD,CAAZ,CACAH,gBAAgB,CAACY,OAAjB,CAA2B,GAAIC,CAAAA,aAAJ,CAAkBf,SAAS,CAACc,OAAV,CAAkBE,MAApC,CAA4C,CACrEC,QAAQ,CAAE,YAD2D,CAA5C,CAA3B,CAGAf,gBAAgB,CAACY,OAAjB,CAAyBI,gBAAzB,CACE,eADF,CAEEC,mBAFF,EAIAjB,gBAAgB,CAACY,OAAjB,CAAyBM,KAAzB,GACD,CAV+B,CAU7B,CAACpB,SAAD,CAAYK,YAAZ,CAA0BH,gBAA1B,CAV6B,CAAhC,CAYA,GAAMiB,CAAAA,mBAAmB,CAAGvB,KAAK,CAACiB,WAAN,CAC1B,cAAc,IAAXQ,CAAAA,IAAW,MAAXA,IAAW,CACZ,GAAIA,IAAI,CAACC,IAAL,CAAY,CAAhB,CAAmB,CACjBf,iBAAiB,CAAC,SAACgB,IAAD,QAAUA,CAAAA,IAAI,CAACC,MAAL,CAAYH,IAAZ,CAAV,EAAD,CAAjB,CACD,CACF,CALyB,CAM1B,CAACd,iBAAD,CAN0B,CAA5B,CASA,GAAMkB,CAAAA,sBAAsB,CAAG7B,KAAK,CAACiB,WAAN,CAAkB,UAAM,CACrDX,gBAAgB,CAACY,OAAjB,CAAyBY,IAAzB,GACArB,YAAY,CAAC,KAAD,CAAZ,CACD,CAH8B,CAG5B,CAACH,gBAAD,CAAmBF,SAAnB,CAA8BK,YAA9B,CAH4B,CAA/B,CAKA,GAAMsB,CAAAA,cAAc,CAAG/B,KAAK,CAACiB,WAAN,CAAkB,UAAM,CAC7C,GAAIP,cAAc,CAACsB,MAAnB,CAA2B,CACzB,GAAMC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,CAASxB,cAAT,CAAyB,CACpCyB,IAAI,CAAE,YAD8B,CAAzB,CAAb,CAGA,GAAMC,CAAAA,GAAG,CAAGC,GAAG,CAACC,eAAJ,CAAoBL,IAApB,CAAZ,CAEAM,OAAO,CAACC,GAAR,CAAYJ,GAAZ,EAEA,GAAMK,CAAAA,CAAC,CAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAAV,CACAD,QAAQ,CAACE,IAAT,CAAcC,WAAd,CAA0BJ,CAA1B,EACAA,CAAC,CAACK,KAAF,CAAU,eAAV,CACAL,CAAC,CAACM,IAAF,CAASX,GAAT,CACAK,CAAC,CAACO,QAAF,CAAa,kCAAb,CACAP,CAAC,CAACQ,KAAF,GACAC,MAAM,CAACb,GAAP,CAAWc,eAAX,CAA2Bf,GAA3B,EACAzB,iBAAiB,CAAC,EAAD,CAAjB,CACD,CACF,CAlBsB,CAkBpB,CAACD,cAAD,CAlBoB,CAAvB,CAoBA,mBACE,qDACE,oBAAC,MAAD,EAAQ,KAAK,CAAE,IAAf,CAAqB,GAAG,CAAEN,SAA1B,CAAqC,gBAAgB,CAAEQ,gBAAvD,EADF,CAEGJ,SAAS,cACR,oBAAC,MAAD,EAAQ,OAAO,CAAEqB,sBAAjB,CAAyC,IAAI,CAAC,SAA9C,CAAwD,MAAM,KAA9D,iBADQ,cAGR,oBAAC,MAAD,EAAQ,OAAO,CAAEb,uBAAjB,CACE,IAAI,CAAC,SADP,kBALJ,CASGN,cAAc,CAACsB,MAAf,CAAwB,CAAxB,eACC,oBAAC,MAAD,EAAQ,OAAO,CAAED,cAAjB,CACA,IAAI,CAAC,SADL,aAVJ,CADF,CAkBD,CA5EM","sourcesContent":["import React from 'react';\r\nimport Webcam from \"react-webcam\";\r\nimport { Button } from 'antd';\r\n\r\n\r\nexport const WebcamStreamCapture = () => {\r\n  const webcamRef = React.useRef(null);\r\n  const mediaRecorderRef = React.useRef(null);\r\n  const [capturing, setCapturing] = React.useState(false);\r\n  const [recordedChunks, setRecordedChunks] = React.useState([]);\r\n\r\n  const videoConstraints = {\r\n    width: 320,\r\n    height: 240,\r\n    facingMode: \"user\"\r\n  };\r\n\r\n  const handleStartCaptureClick = React.useCallback(() => {\r\n    setCapturing(true);\r\n    mediaRecorderRef.current = new MediaRecorder(webcamRef.current.stream, {\r\n      mimeType: \"video/webm\"\r\n    });\r\n    mediaRecorderRef.current.addEventListener(\r\n      \"dataavailable\",\r\n      handleDataAvailable\r\n    );\r\n    mediaRecorderRef.current.start();\r\n  }, [webcamRef, setCapturing, mediaRecorderRef]);\r\n\r\n  const handleDataAvailable = React.useCallback(\r\n    ({ data }) => {\r\n      if (data.size > 0) {\r\n        setRecordedChunks((prev) => prev.concat(data));\r\n      }\r\n    },\r\n    [setRecordedChunks]\r\n  );\r\n\r\n  const handleStopCaptureClick = React.useCallback(() => {\r\n    mediaRecorderRef.current.stop();\r\n    setCapturing(false);\r\n  }, [mediaRecorderRef, webcamRef, setCapturing]);\r\n\r\n  const handleDownload = React.useCallback(() => {\r\n    if (recordedChunks.length) {\r\n      const blob = new Blob(recordedChunks, {\r\n        type: \"video/webm\"\r\n      });\r\n      const url = URL.createObjectURL(blob);\r\n\r\n      console.log(url);\r\n\r\n      const a = document.createElement(\"a\");\r\n      document.body.appendChild(a);\r\n      a.style = \"display: none\";\r\n      a.href = url;\r\n      a.download = \"react-webcam-stream-capture.webm\";\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n      setRecordedChunks([]);\r\n    }\r\n  }, [recordedChunks]);\r\n\r\n  return (\r\n    <>\r\n      <Webcam audio={true} ref={webcamRef} videoConstraints={videoConstraints} />\r\n      {capturing ? (\r\n        <Button onClick={handleStopCaptureClick} type=\"primary\" danger>Stop Capture</Button>\r\n      ) : (\r\n        <Button onClick={handleStartCaptureClick}\r\n          type=\"primary\"\r\n        >Start Capture</Button>\r\n      )}\r\n      {recordedChunks.length > 0 && (\r\n        <Button onClick={handleDownload} \r\n        type=\"primary\"\r\n        >Download</Button>\r\n      )}\r\n      \r\n    </>\r\n  );\r\n};"]},"metadata":{},"sourceType":"module"}