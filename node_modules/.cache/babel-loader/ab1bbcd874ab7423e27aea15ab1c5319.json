{"ast":null,"code":"import _classCallCheck from\"D:\\\\Repos\\\\Projects\\\\test-ebook-2\\\\OrangeOakleaf\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\Repos\\\\Projects\\\\test-ebook-2\\\\OrangeOakleaf\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\Repos\\\\Projects\\\\test-ebook-2\\\\OrangeOakleaf\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\Repos\\\\Projects\\\\test-ebook-2\\\\OrangeOakleaf\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Spin}from'antd';import{connect}from'react-redux';import{WebcamStreamCapture}from'../../components/WebcamStreamCapture.js';var IframePage=/*#__PURE__*/function(_Component){_inherits(IframePage,_Component);var _super=_createSuper(IframePage);function IframePage(){var _this;_classCallCheck(this,IframePage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isLoading:true,scale:1};_this.scaleResize=function(){var scale=1;var screenWidth=window.innerWidth;var screenHeight=window.innerHeight;if(screenWidth>1024){scale=1;}else if(1024*0.8>=screenWidth<=1024){scale=0.8;}else{scale=Math.floor(screenWidth/1024*10)/10;}_this.setState({scale:scale});};return _this;}_createClass(IframePage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.scaleResize();this.iframeEl.onload=function(){_this2.setState({isLoading:false});};}//适配\n},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,isLoading=_this$state.isLoading,scale=_this$state.scale;// 打平之后的菜单\nvar query=this.props.location.query||{};var authUser=this.props.authUser;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{style:{display:\"flex\",justifyContent:\"center\",alignItems:\"center\"}},/*#__PURE__*/React.createElement(WebcamStreamCapture,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"iframe-container\",style:{paddingLeft:10,width:1024,height:798,WebkitOverflowScrolling:'touch'// overflow-y: scroll;\n// pointerEvents: 'none'\n}},isLoading?/*#__PURE__*/React.createElement(\"div\",{style:{position:'absolute',zIndex:1000,left:0,top:0,bottom:0,right:0,display:'flex',alignItems:'center',justifyContent:'center',background:'rgb(245, 247, 250)'}},/*#__PURE__*/React.createElement(Spin,null)):null,/*#__PURE__*/React.createElement(\"iframe\",{title:\"\\u5916\\u94FE\",ref:function ref(el){return _this3.iframeEl=el;},allowtransparency:\"no\",src:\"\".concat(query.url,\"?user=\").concat(authUser),frameBorder:\"0\",width:'100%',height:'100%',scrolling:\"yes\",style:{transform:\"scale(\".concat(scale,\")\")}// sandbox=\"allow-scripts allow-same-origin allow-popups\"\n})));}}]);return IframePage;}(Component);export default connect(function(_ref){var authUser=_ref.authUser;return{authUser:authUser};})(IframePage);","map":{"version":3,"sources":["D:/Repos/Projects/test-ebook-2/OrangeOakleaf/src/pages/IframePage/IframePage.js"],"names":["React","Component","Spin","connect","WebcamStreamCapture","IframePage","state","isLoading","scale","scaleResize","screenWidth","window","innerWidth","screenHeight","innerHeight","Math","floor","setState","iframeEl","onload","query","props","location","authUser","display","justifyContent","alignItems","paddingLeft","width","height","WebkitOverflowScrolling","position","zIndex","left","top","bottom","right","background","el","url","transform"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Spin } from 'antd';\r\nimport { connect } from 'react-redux';\r\nimport {WebcamStreamCapture} from '../../components/WebcamStreamCapture.js';\r\n\r\nclass IframePage extends Component {\r\n  state = {\r\n    isLoading: true,\r\n    scale: 1\r\n  };\r\n\r\n  componentDidMount() {\r\n\r\n    this.scaleResize()\r\n    this.iframeEl.onload = () => {\r\n      this.setState({\r\n        isLoading: false,\r\n      });\r\n    };\r\n\r\n  }\r\n\r\n  //适配\r\n\r\n  scaleResize = () => {\r\n    let scale = 1;\r\n    let screenWidth = window.innerWidth;\r\n    let screenHeight = window.innerHeight;\r\n\r\n    if (screenWidth > 1024) {\r\n      scale = 1\r\n    } else if (1024 * 0.8 >= screenWidth <= 1024) {\r\n      scale = 0.8\r\n    } else {\r\n      scale = Math.floor(screenWidth / 1024 * 10) / 10\r\n    }\r\n    this.setState({\r\n      scale,\r\n    });\r\n  };\r\n\r\n\r\n  render() {\r\n    const { isLoading, scale } = this.state;\r\n    // 打平之后的菜单\r\n    const query = this.props.location.query || {};\r\n    const { authUser } = this.props\r\n\r\n    return (\r\n      <div>\r\n        <div style={\r\n          {\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n          }\r\n        }>\r\n          <WebcamStreamCapture/>\r\n        </div>\r\n        <div\r\n          className=\"iframe-container\"\r\n          style={{\r\n            paddingLeft: 10,\r\n            width: 1024,\r\n            height: 798,\r\n            WebkitOverflowScrolling: 'touch',\r\n            // overflow-y: scroll;\r\n            // pointerEvents: 'none'\r\n          }}\r\n        >\r\n          {isLoading ? (\r\n            <div\r\n              style={{\r\n                position: 'absolute',\r\n                zIndex: 1000,\r\n                left: 0,\r\n                top: 0,\r\n                bottom: 0,\r\n                right: 0,\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                background: 'rgb(245, 247, 250)',\r\n              }}\r\n            >\r\n              <Spin />\r\n            </div>\r\n          ) : null}\r\n          <iframe\r\n            title=\"外链\"\r\n            ref={el => (this.iframeEl = el)}\r\n            allowtransparency=\"no\"\r\n            src={`${query.url}?user=${authUser}`}\r\n            frameBorder=\"0\"\r\n            width={'100%'}\r\n            height={'100%'}\r\n            scrolling=\"yes\"\r\n            style={{ transform: `scale(${scale})` }}\r\n          // sandbox=\"allow-scripts allow-same-origin allow-popups\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(({ authUser }) => ({ authUser }))(IframePage);\r\n"]},"metadata":{},"sourceType":"module"}